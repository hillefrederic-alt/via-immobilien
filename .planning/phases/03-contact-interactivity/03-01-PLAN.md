---
phase: 03-contact-interactivity
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ContactForm.astro
autonomous: true
user_setup:
  - service: Web3Forms
    why: "Static form submission to email"
    env_vars: []
    dashboard_config:
      - task: "Create access key at web3forms.com (free, no account required)"
        location: "https://web3forms.com/#start - enter email, receive access key"

must_haves:
  truths:
    - "Form displays Name, Email, Phone, Message fields with correct labels"
    - "Required fields show error when left empty after blur"
    - "Invalid email format shows error message after blur"
    - "GDPR checkbox must be checked to submit form"
    - "Honeypot field is hidden from users but present in HTML"
  artifacts:
    - path: "src/components/ContactForm.astro"
      provides: "Contact form with validation and Web3Forms integration"
      min_lines: 150
      contains: ["Web3Forms", "honeypot", "consent", "aria-describedby"]
  key_links:
    - from: "src/components/ContactForm.astro"
      to: "Web3Forms API"
      via: "form action URL"
      pattern: "action.*web3forms"
---

<objective>
Create a contact form component with inline validation, honeypot spam protection, and GDPR-compliant consent checkbox.

Purpose: Enable visitors to send inquiries to Denise via a user-friendly, accessible form that validates input on blur and submits to Web3Forms for email delivery.

Output: ContactForm.astro component ready for integration into kontakt.astro
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-contact-interactivity/03-RESEARCH.md
@src/styles/global.css
@src/components/Section.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ContactForm component with fields and structure</name>
  <files>src/components/ContactForm.astro</files>
  <action>
Create ContactForm.astro with:

**Form Structure:**
- Form action: "https://api.web3forms.com/submit" method="POST"
- Hidden field: access_key (placeholder value "YOUR_ACCESS_KEY_HERE" - user replaces later)
- Hidden field: redirect to /danke page

**Form Fields:**
1. Name (required, minlength 2)
   - Label: "Name *"
   - Error message: "Bitte geben Sie Ihren Namen ein."
2. Email (required, type="email")
   - Label: "E-Mail *"
   - Error message: "Bitte geben Sie eine gultige E-Mail-Adresse ein."
3. Phone (optional, type="tel")
   - Label: "Telefon (optional)"
   - Placeholder: "+49"
4. Message (required, minlength 10, textarea rows=5)
   - Label: "Nachricht *"
   - Error message: "Bitte geben Sie eine Nachricht ein (mindestens 10 Zeichen)."

**Honeypot Field:**
- Hidden via CSS (position: absolute; left: -9999px)
- Realistic name: "contact_number"
- aria-hidden="true", tabindex="-1", autocomplete="off"

**GDPR Consent:**
- Checkbox (required, unchecked by default)
- Label links to /datenschutz (opens in new tab)
- Text: "Ich stimme der Datenschutzerklarung zu und willige ein, dass meine Daten zur Bearbeitung meiner Anfrage verarbeitet werden. *"
- Error message: "Bitte stimmen Sie der Datenschutzerklarung zu."

**Submit Button:**
- Text: "Nachricht senden"
- Styled with brand colors (gold background, navy text)

**Accessibility:**
- All fields have aria-describedby pointing to error messages
- Error messages have aria-live="polite"
- Proper label associations with for/id

**Form Attributes:**
- novalidate attribute (enables custom validation styling)
- All required fields marked with required attribute
  </action>
  <verify>File exists and contains form with all specified fields, honeypot, and GDPR checkbox</verify>
  <done>ContactForm.astro has complete form structure with Name, Email, Phone, Message, honeypot, and consent checkbox</done>
</task>

<task type="auto">
  <name>Task 2: Add validation CSS for blur-based error display</name>
  <files>src/components/ContactForm.astro</files>
  <action>
Add scoped styles to ContactForm.astro:

**Field Layout:**
- .form-field: margin-bottom var(--spacing-lg)
- Labels: display block, semibold, navy color, margin-bottom xs

**Input/Textarea Base Styles:**
- Full width, padding var(--spacing-sm)
- Border: 2px solid var(--color-border)
- Border radius: var(--border-radius-sm)
- Transition for border-color and outline

**Focus State (WCAG 2.2):**
- Outline: 3px solid var(--color-gold), offset 2px
- Border-color: var(--color-navy)

**Invalid State (blur + has content):**
Using pattern: input:not(:focus):not(:placeholder-shown):invalid
- Border-color: #C1292E (error red)
- Outline: 2px solid #C1292E

**Error Message:**
- Hidden by default (display: none)
- Color: #C1292E
- Font-size: var(--font-size-sm)
- margin-top: var(--spacing-xs)
- Show when sibling input is invalid (using + selector)

**Valid State (optional positive feedback):**
- Border-color: #2E7D32 (success green)
- Only for fields with content that are valid

**Checkbox Field:**
- Flex layout with checkbox and label text
- Checkbox not full width
- Label text normal weight

**Submit Button:**
- Background: var(--color-gold)
- Color: var(--color-navy)
- Padding: var(--spacing-md) var(--spacing-xl)
- Border-radius: var(--border-radius-md)
- Font-weight: semibold
- Hover: background var(--color-navy), color var(--color-cream)
- Transition: all var(--transition-normal)
- Cursor pointer, no border
  </action>
  <verify>Styles provide visual feedback for focus, invalid, and valid states</verify>
  <done>ContactForm has complete styling with blur-based validation feedback matching brand design</done>
</task>

</tasks>

<verification>
- [ ] ContactForm.astro exists in src/components/
- [ ] Form has action pointing to Web3Forms API
- [ ] All 4 main fields present (Name, Email, Phone, Message)
- [ ] Honeypot field hidden but present in HTML
- [ ] GDPR checkbox with link to /datenschutz
- [ ] CSS shows errors only after blur when field has content
- [ ] All fields have proper accessibility attributes
</verification>

<success_criteria>
ContactForm component is complete with all fields, validation styling, honeypot spam protection, and GDPR consent. Ready to be imported into kontakt.astro.
</success_criteria>

<output>
After completion, create `.planning/phases/03-contact-interactivity/03-01-SUMMARY.md`
</output>
