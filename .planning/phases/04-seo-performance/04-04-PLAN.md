---
phase: 04-seo-performance
plan: 04
type: execute
wave: 4
depends_on: ["04-01", "04-02", "04-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Lighthouse Performance score is 90 or higher"
    - "Lighthouse Accessibility score is 90 or higher"
    - "Lighthouse Best Practices score is 90 or higher"
    - "Lighthouse SEO score is 90 or higher"
    - "Open Graph preview works on social media validators"
    - "LocalBusiness schema validates without errors"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 4 success criteria through automated testing and manual validation.

Purpose: Confirm SEO and performance optimizations meet the defined targets before marking phase complete.
Output: Verification results documenting Lighthouse scores, OG validation, and schema validation.
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-seo-performance/04-01-SUMMARY.md
@.planning/phases/04-seo-performance/04-02-SUMMARY.md
@.planning/phases/04-seo-performance/04-03-SUMMARY.md

Phase 4 Success Criteria to verify:
1. Page load time under 3 seconds on 3G (PageSpeed Insights)
2. Lighthouse score 90+ across all categories
3. All pages have unique meta title and description
4. Open Graph tags enable proper social preview
5. LocalBusiness schema with business info
6. Plausible Analytics tracks page views
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run Lighthouse audit on built site</name>
  <files></files>
  <action>
Build and preview the site, then run Lighthouse audit:

```bash
cd "/Users/frederichille/Documents/Via Immo"
npm run build
npm run preview &
# Wait for server to start
sleep 3
```

Then open Chrome DevTools on http://localhost:4321 and run Lighthouse audit for:
- Performance
- Accessibility
- Best Practices
- SEO

Alternatively, use Lighthouse CLI:
```bash
npx lighthouse http://localhost:4321 --output=json --output-path=./lighthouse-report.json
```

Document scores for each category. Target: 90+ for all.

Common issues to check if scores are low:
- Performance: Check LCP, CLS, TBT metrics
- Accessibility: Missing alt text, contrast issues, form labels
- Best Practices: Console errors, HTTPS, image aspect ratios
- SEO: Missing meta description, viewport, crawlable links

**PERF-01 verification:** Lighthouse Performance score of 90+ on a static Astro site typically ensures sub-3-second load times. The Performance score penalizes pages with LCP > 2.5s. If Performance is 90+, PERF-01 is satisfied.
  </action>
  <verify>Lighthouse reports 90+ in all four categories. Performance 90+ confirms PERF-01 (sub-3s load time).</verify>
  <done>Lighthouse audit completed with all scores 90+, confirming PERF-01 and PERF-02</done>
</task>

<task type="auto">
  <name>Task 2: Verify SEO implementation completeness</name>
  <files></files>
  <action>
Check each page for proper SEO implementation:

1. **Title uniqueness check:**
```bash
grep -r "title=" src/pages/*.astro | cut -d'"' -f2 | sort | uniq -d
```
Should return empty (no duplicates).

2. **Meta description check:**
View source of each page, verify:
- Homepage has description about Immobilienmaklerin Frankfurt
- Each page has different, relevant description
- Descriptions are 150-160 characters

3. **Canonical URL check:**
View source, look for `<link rel="canonical"` - should be present on all pages.

4. **Open Graph check:**
View source, verify presence of:
- og:title
- og:description
- og:image (absolute URL starting with https://via-immobilien.de)
- og:url (canonical URL)
- og:type
- og:site_name

5. **Sitemap check:**
```bash
cat dist/sitemap-index.xml
```
Should list all public pages except /danke/ and /kontakt-alt/.

6. **Robots.txt check:**
```bash
cat dist/robots.txt
```
Should contain User-agent, Allow, and Sitemap reference.
  </action>
  <verify>All SEO elements present: unique titles, descriptions, canonical URLs, OG tags, sitemap, robots.txt</verify>
  <done>SEO implementation verified complete across all pages</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete SEO and performance optimization for Via Immobilien website:
- astro-seo integration with OG tags
- LocalBusiness schema markup
- Sitemap and robots.txt generation
- Font preloading
- Plausible Analytics integration
- Unique meta titles/descriptions for all pages
  </what-built>
  <how-to-verify>
1. **Lighthouse audit** (most important):
   - Open http://localhost:4321 in Chrome
   - Open DevTools (F12) > Lighthouse tab
   - Run audit for all categories
   - Verify all scores are 90+
   - Screenshot or note the scores

2. **Open Graph preview**:
   - Visit https://www.opengraph.xyz/
   - Enter https://via-immobilien.de (or use localhost URL with ngrok)
   - Verify preview shows title, description, image
   - Note: OG image may need to be created as /og-image.jpg

3. **Schema validation** (after deployment):
   - Visit https://search.google.com/test/rich-results
   - Enter site URL
   - Check for RealEstateAgent schema
   - Verify no errors (warnings about placeholders are expected)

4. **Visual spot check**:
   - Browse through all pages
   - Check page titles in browser tab
   - Verify no console errors

Report findings:
- Lighthouse scores (Performance/Accessibility/Best Practices/SEO)
- OG preview status (working/not working/needs image)
- Schema validation status
- Any issues found
  </how-to-verify>
  <resume-signal>Type "approved" with scores, or describe issues that need fixing</resume-signal>
</task>

</tasks>

<verification>
Phase 4 is complete when:
1. Lighthouse Performance >= 90
2. Lighthouse Accessibility >= 90
3. Lighthouse Best Practices >= 90
4. Lighthouse SEO >= 90
5. OG tags validated (manual check or tool)
6. LocalBusiness schema validates
7. User approves verification checkpoint
</verification>

<success_criteria>
- All Lighthouse scores 90+ documented
- OG preview works correctly
- Schema markup validates
- No critical issues found during verification
- User approval received
</success_criteria>

<output>
After completion, create `.planning/phases/04-seo-performance/04-04-SUMMARY.md`
</output>
