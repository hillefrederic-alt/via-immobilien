# Phase 4: SEO & Performance - Research

**Researched:** 2026-01-30
**Domain:** SEO optimization, web performance, and analytics for Astro static sites
**Confidence:** HIGH

## Summary

Phase 4 focuses on optimizing a German real estate agent website for local search visibility and achieving Lighthouse scores of 90+ across all categories. The research reveals that Astro provides an excellent foundation for performance optimization with its zero-JavaScript-by-default approach, static site generation, and modern tooling ecosystem.

For SEO implementation, the standard approach combines the `astro-seo` component for meta tags and Open Graph data, `@astrojs/sitemap` for XML sitemap generation, and `astro-robots-txt` for crawler directives. LocalBusiness schema markup should be implemented using JSON-LD format directly in page templates to improve local search visibility.

For analytics, Plausible Analytics is the clear choice for German GDPR compliance - it requires no cookie consent banners, stores all data in EU servers, and tracks page views without collecting personal information. The site is already using locally-hosted fonts (GDPR requirement), which also improves performance by eliminating external connections.

**Primary recommendation:** Implement SEO using the `astro-seo` component with page-specific props passed from layout, add `@astrojs/sitemap` and `astro-robots-txt` integrations, include LocalBusiness JSON-LD schema in the base layout, optimize images with explicit dimensions and fetchpriority attributes, and integrate Plausible Analytics with a simple script tag (no consent required).

## Standard Stack

The established libraries/tools for SEO and performance optimization in Astro:

### Core SEO Libraries
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| astro-seo | Latest (3.x) | Comprehensive SEO meta tags | Most popular Astro SEO component, supports OpenGraph, Twitter cards, and extends to custom tags |
| @astrojs/sitemap | 3.6.0+ | XML sitemap generation | Official Astro integration, auto-generates sitemaps from routes during build |
| astro-robots-txt | Latest (1.x) | robots.txt generation | Simple integration for crawler directives, works seamlessly with Astro build process |

### Performance Tools
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| Built-in Astro Image | Astro 5.x | Image optimization | Native `<Image>` and `<Picture>` components, auto-generates responsive images and prevents CLS |
| Plausible Analytics | Latest | Privacy-friendly analytics | GDPR-compliant without consent banners, EU-hosted, no cookies, perfect for German market |

### Development/Testing
| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| lighthouse-ci | Latest | Automated performance testing | Optional for CI/CD pipelines to enforce performance budgets |
| psi (PageSpeed Insights CLI) | Latest | Command-line performance testing | Manual testing or scripted performance audits |

### Alternatives Considered
| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| astro-seo | Manual meta tags | More control but verbose, error-prone, no type safety |
| Plausible Analytics | Google Analytics | Google tracks more data but requires cookie consent, not GDPR-friendly by default |
| @astrojs/sitemap | Manual sitemap.xml | Full control but no automatic updates when routes change |

**Installation:**
```bash
npm install astro-seo @astrojs/sitemap astro-robots-txt
```

## Architecture Patterns

### Recommended Project Structure
```
src/
├── layouts/
│   └── BaseLayout.astro      # Include SEO component with default props
├── components/
│   └── SEO.astro              # Optional wrapper for astro-seo with site defaults
├── scripts/
│   └── schema.json            # LocalBusiness schema template (optional)
public/
├── robots.txt                 # Generated by astro-robots-txt
└── sitemap-*.xml              # Generated by @astrojs/sitemap
```

### Pattern 1: SEO Component Integration in Layout

**What:** Import and configure the SEO component in the base layout to ensure all pages have proper meta tags

**When to use:** Always - this is the standard pattern for Astro SEO

**Example:**
```astro
---
// src/layouts/BaseLayout.astro
import { SEO } from "astro-seo";

interface Props {
  title: string;
  description?: string;
  image?: string;
}

const {
  title,
  description = 'Denise Semmel - Ihre vertrauensvolle Begleitung beim Immobilienverkauf und -vermietung in der Rhein-Main-Region',
  image = '/og-image.jpg'
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!DOCTYPE html>
<html lang="de">
  <head>
    <SEO
      title={title}
      description={description}
      canonical={canonicalURL.toString()}
      openGraph={{
        basic: {
          title: title,
          type: "website",
          image: new URL(image, Astro.site).toString(),
          url: canonicalURL.toString()
        },
        optional: {
          description: description,
          siteName: "Via Immobilien - Denise Semmel"
        }
      }}
      twitter={{
        card: "summary_large_image",
        image: new URL(image, Astro.site).toString(),
        imageAlt: title
      }}
      extend={{
        meta: [
          { name: "viewport", content: "width=device-width, initial-scale=1.0" },
          { name: "generator", content: Astro.generator }
        ],
        link: [
          { rel: "icon", type: "image/svg+xml", href: "/favicon.svg" },
          { rel: "icon", href: "/favicon.ico" }
        ]
      }}
    />

    <meta charset="utf-8" />
  </head>
  <body>
    <slot />
  </body>
</html>
```

**Source:** [GitHub - jonasmerlin/astro-seo](https://github.com/jonasmerlin/astro-seo) and [astro-seo implementation guide](https://egghead.io/lessons/astro-implement-seo-in-an-astro-website-with-astro-seo)

### Pattern 2: LocalBusiness Schema Markup with JSON-LD

**What:** Add structured data for local business directly in the layout using JSON-LD format

**When to use:** For the homepage and contact page, or globally in the base layout

**Example:**
```astro
---
// In <head> section of BaseLayout.astro
---

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "RealEstateAgent",
  "name": "Via Immobilien - Denise Semmel",
  "image": "https://via-immobilien.de/logo.jpg",
  "url": "https://via-immobilien.de",
  "telephone": "+49-YOUR-PHONE",
  "email": "kontakt@via-immobilien.de",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "YOUR STREET",
    "addressLocality": "YOUR CITY",
    "addressRegion": "Hessen",
    "postalCode": "YOUR ZIP",
    "addressCountry": "DE"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": YOUR_LAT,
    "longitude": YOUR_LON
  },
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
      "opens": "09:00",
      "closes": "18:00"
    }
  ],
  "areaServed": {
    "@type": "Place",
    "name": "Rhein-Main-Region"
  },
  "priceRange": "€€",
  "sameAs": [
    "https://www.facebook.com/YOUR_PAGE",
    "https://www.linkedin.com/in/YOUR_PROFILE"
  ]
}
</script>
```

**Source:** [Google Search LocalBusiness documentation](https://developers.google.com/search/docs/appearance/structured-data/local-business) and [Schema.org LocalBusiness](https://schema.org/LocalBusiness)

### Pattern 3: Image Optimization with Native Astro Components

**What:** Use Astro's built-in `<Image>` and `<Picture>` components with explicit dimensions to prevent layout shift

**When to use:** For all images, especially above-the-fold hero images

**Example:**
```astro
---
import { Image } from 'astro:assets';
import heroImage from '../assets/hero.jpg';
---

<!-- Above-the-fold hero image with priority loading -->
<Image
  src={heroImage}
  alt="Denise Semmel, Immobilienmaklerin in der Rhein-Main-Region"
  width={1200}
  height={630}
  loading="eager"
  fetchpriority="high"
  quality={90}
/>

<!-- Below-the-fold images with lazy loading -->
<Image
  src={propertyImage}
  alt="Beschreibung der Immobilie"
  width={800}
  height={600}
  loading="lazy"
/>
```

**Source:** [Astro Images documentation](https://docs.astro.build/en/guides/images/) and [Uploadcare Astro image optimization guide](https://uploadcare.com/blog/how-to-optimize-images-in-astro/)

### Pattern 4: Sitemap and Robots.txt Configuration

**What:** Configure sitemap generation and robots.txt in astro.config.mjs

**When to use:** Required for all production sites

**Example:**
```javascript
// astro.config.mjs
import { defineConfig } from 'astro/config';
import sitemap from '@astrojs/sitemap';
import robotsTxt from 'astro-robots-txt';

export default defineConfig({
  site: 'https://via-immobilien.de',
  integrations: [
    sitemap({
      filter: (page) =>
        !page.includes('/admin/') &&
        !page.includes('/preview/')
    }),
    robotsTxt({
      sitemap: true, // Automatically adds sitemap reference
      policy: [
        {
          userAgent: '*',
          allow: '/',
          disallow: ['/admin/', '/preview/']
        }
      ]
    })
  ]
});
```

**Source:** [@astrojs/sitemap official docs](https://docs.astro.build/en/guides/integrations-guide/sitemap/) and [astro-robots-txt npm](https://www.npmjs.com/package/astro-robots-txt)

### Pattern 5: Plausible Analytics Integration

**What:** Add Plausible Analytics script to track page views without cookie consent

**When to use:** Required for analytics without GDPR consent banners

**Example:**
```astro
---
// In <head> section of BaseLayout.astro
---

<!-- Plausible Analytics - GDPR compliant, no cookie consent needed -->
<script defer data-domain="via-immobilien.de" src="https://plausible.io/js/script.js"></script>
```

**Alternative (self-hosted):**
```astro
<script defer data-domain="via-immobilien.de" src="https://your-plausible-instance.com/js/script.js"></script>
```

**Source:** [Plausible Analytics documentation](https://plausible.io/data-policy) and [GDPR compliance guide](https://plausible.io/blog/legal-assessment-gdpr-eprivacy)

### Pattern 6: Font Optimization with Preload

**What:** Preload critical self-hosted fonts to improve LCP

**When to use:** For fonts used above-the-fold (already using locally-hosted fonts per PROJECT context)

**Example:**
```astro
---
// In <head> section of BaseLayout.astro
---

<!-- Preload critical fonts (use crossorigin even for self-hosted) -->
<link
  rel="preload"
  href="/fonts/your-font.woff2"
  as="font"
  type="font/woff2"
  crossorigin
/>

<style>
  @font-face {
    font-family: 'YourFont';
    src: url('/fonts/your-font.woff2') format('woff2');
    font-display: swap;
  }
</style>
```

**Source:** [web.dev font best practices](https://web.dev/articles/font-best-practices) and [DebugBear font performance guide](https://www.debugbear.com/blog/website-font-performance)

### Anti-Patterns to Avoid

- **Same meta tags on all pages:** Each page should have unique, relevant title and description. Using identical meta tags across all pages hurts SEO and provides poor user experience in search results.

- **Missing canonical URLs:** Self-referencing canonical tags should be present on every page to avoid duplicate content issues, even if you think you don't have duplicates.

- **Loading all images eagerly:** Only above-the-fold images should use `loading="eager"` and `fetchpriority="high"`. Loading all images eagerly wastes bandwidth and slows down initial page load.

- **No width/height on images:** Missing dimensions cause Cumulative Layout Shift (CLS) as images load. Always specify explicit dimensions or use Astro's `<Image>` component which handles this automatically.

- **Using Google Fonts CDN:** For German GDPR compliance, fonts must be self-hosted to avoid third-party connections that require consent. The project already follows this correctly with locally-hosted woff2 files.

- **Overusing preload:** Preloading too many resources can actually harm performance by competing with critical resources. Only preload 1-2 critical resources (typically hero image and primary font).

## Don't Hand-Roll

Problems that look simple but have existing solutions:

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Meta tag management | Manual `<meta>` tags in every page | `astro-seo` component | Handles Open Graph, Twitter cards, canonical URLs, and provides type safety. Easy to miss required properties manually. |
| Sitemap generation | Custom sitemap.xml builder | `@astrojs/sitemap` | Automatically discovers all routes, handles pagination, supports i18n, updates on every build. Manual sitemaps get outdated. |
| LocalBusiness schema | Complex nested objects | JSON-LD with schema.org types | Google's preferred format, easy to validate, copy-paste from official examples. Custom implementations often have validation errors. |
| Image optimization | Manual responsive images | Astro `<Image>` and `<Picture>` | Automatically generates multiple sizes/formats, prevents CLS, handles srcset/sizes attributes. Manual approach misses edge cases. |
| Analytics tracking | Custom analytics solution | Plausible Analytics | GDPR-compliant out of the box, no cookie consent needed, tracks everything you need. Custom solutions require legal review. |
| Robots.txt generation | Hardcoded robots.txt file | `astro-robots-txt` integration | Automatically includes sitemap URL, updates with site config changes, prevents hardcoded URL mismatches. |
| Performance monitoring | Manual Lighthouse runs | Lighthouse CI or PageSpeed Insights API | Automates testing, tracks performance over time, integrates with CI/CD. Manual testing is inconsistent. |

**Key insight:** SEO and performance optimization involve many interconnected pieces (meta tags, structured data, sitemaps, image optimization, etc.). Each piece has edge cases and best practices that are constantly evolving. Using established tools means you get updates and bug fixes automatically, and you benefit from community knowledge about what works in practice.

## Common Pitfalls

### Pitfall 1: Forgetting to Set the `site` Config

**What goes wrong:** The `@astrojs/sitemap` integration and canonical URLs require the `site` configuration in `astro.config.mjs`. Without it, sitemaps won't generate and canonical URLs will be incorrect.

**Why it happens:** The `site` config is optional for local development, so developers often forget to set it until deployment.

**How to avoid:** Set `site: 'https://via-immobilien.de'` in `astro.config.mjs` immediately after installing sitemap integration.

**Warning signs:** Build warnings about missing site URL, sitemap files not generated, canonical URLs showing localhost in production.

### Pitfall 2: Open Graph Images with Relative Paths

**What goes wrong:** Social media platforms require absolute URLs for Open Graph images. Using relative paths like `/og-image.jpg` will break social media previews.

**Why it happens:** Developers test locally and don't verify social media previews, or assume relative paths work everywhere.

**How to avoid:** Always use `new URL(image, Astro.site).toString()` to generate absolute URLs for Open Graph images.

**Warning signs:** Facebook Sharing Debugger shows "Could not retrieve data from URL", Twitter Card Validator shows broken image previews.

### Pitfall 3: Missing Crossorigin Attribute on Font Preload

**What goes wrong:** Preloaded fonts won't load if the `crossorigin` attribute is missing from the `<link rel="preload">` tag, even for self-hosted fonts.

**Why it happens:** This is a surprising requirement - fonts are fetched with CORS mode even when served from the same origin.

**How to avoid:** Always include `crossorigin` (or `crossorigin="anonymous"`) on font preload links.

**Warning signs:** Chrome DevTools shows "A preload for [font.woff2] is found, but is not used", font still loads but preload has no effect.

### Pitfall 4: Not Testing Structured Data Validation

**What goes wrong:** LocalBusiness schema with minor JSON-LD syntax errors or missing required properties won't generate rich results in Google Search.

**Why it happens:** JSON-LD looks correct to human eyes but has subtle issues like missing quotes, wrong property names, or incomplete nested objects.

**How to avoid:** Always test schema markup with Google's [Rich Results Test](https://search.google.com/test/rich-results) before deploying.

**Warning signs:** No knowledge panel appears in Google Search for business name, Search Console shows "Unparsable structured data" errors.

### Pitfall 5: Blocking Important Pages in robots.txt

**What goes wrong:** Accidentally blocking pages you want indexed (like `/services/` or `/about/`) with overly broad disallow rules.

**Why it happens:** Copying robots.txt patterns from other sites without understanding their URL structure.

**How to avoid:** Test robots.txt with Google Search Console's robots.txt Tester tool, be very specific with disallow patterns.

**Warning signs:** Important pages don't appear in search results, Search Console shows "Blocked by robots.txt" for pages you want indexed.

### Pitfall 6: Ignoring Core Web Vitals Until Production

**What goes wrong:** Site performs well locally but has poor Lighthouse scores in production due to larger images, slower servers, or third-party scripts.

**Why it happens:** Local development doesn't simulate real-world network conditions and CDN behavior.

**How to avoid:** Run PageSpeed Insights on staging environment before deploying to production, test on 3G throttled network in Chrome DevTools.

**Warning signs:** Lighthouse Performance score below 90, LCP over 2.5 seconds, CLS over 0.1.

### Pitfall 7: Same Title Tag Format for All Pages

**What goes wrong:** Using identical title formats (like "Via Immobilien | [Page]") makes all pages look similar in search results and reduces click-through rate.

**Why it happens:** Developers prioritize consistency over relevance and uniqueness.

**How to avoid:** Make titles descriptive and action-oriented. Instead of "Via Immobilien | Über uns", use "Erfahrene Immobilienmaklerin in Frankfurt - Denise Semmel".

**Warning signs:** Low click-through rates in Google Search Console, pages rank but don't get clicks.

## Code Examples

Verified patterns from official sources:

### Complete BaseLayout.astro with SEO and Performance Optimizations

```astro
---
/**
 * BaseLayout - Optimized for SEO and Performance
 *
 * Phase 4 enhancements:
 * - astro-seo component for meta tags and Open Graph
 * - LocalBusiness schema markup
 * - Plausible Analytics integration
 * - Font preloading for LCP optimization
 * - Self-referencing canonical URLs
 */

import '../styles/global.css';
import 'aos/dist/aos.css';
import { SEO } from "astro-seo";
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import CookieBanner from '../components/CookieBanner.astro';

interface Props {
  title: string;
  description?: string;
  image?: string;
  noindex?: boolean;
}

const {
  title,
  description = 'Denise Semmel - Ihre vertrauensvolle Begleitung beim Immobilienverkauf und -vermietung in der Rhein-Main-Region',
  image = '/og-image.jpg',
  noindex = false
} = Astro.props;

// Generate absolute URLs for Open Graph
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const ogImageURL = new URL(image, Astro.site);

// LocalBusiness schema data (replace with actual business info)
const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": "RealEstateAgent",
  "name": "Via Immobilien - Denise Semmel",
  "image": new URL('/logo.jpg', Astro.site).toString(),
  "url": Astro.site?.toString(),
  "telephone": "+49-YOUR-PHONE",
  "email": "kontakt@via-immobilien.de",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "YOUR STREET",
    "addressLocality": "YOUR CITY",
    "addressRegion": "Hessen",
    "postalCode": "YOUR ZIP",
    "addressCountry": "DE"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 50.1109, // Example: Frankfurt coordinates
    "longitude": 8.6821
  },
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
      "opens": "09:00",
      "closes": "18:00"
    }
  ],
  "areaServed": {
    "@type": "Place",
    "name": "Rhein-Main-Region"
  },
  "priceRange": "€€"
};
---

<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />

    <!-- SEO Component with Open Graph and Twitter Cards -->
    <SEO
      title={title}
      description={description}
      canonical={canonicalURL.toString()}
      noindex={noindex}
      nofollow={noindex}
      openGraph={{
        basic: {
          title: title,
          type: "website",
          image: ogImageURL.toString(),
          url: canonicalURL.toString()
        },
        optional: {
          description: description,
          siteName: "Via Immobilien - Denise Semmel",
          locale: "de_DE"
        },
        image: {
          url: ogImageURL.toString(),
          width: 1200,
          height: 630,
          alt: title
        }
      }}
      twitter={{
        card: "summary_large_image",
        image: ogImageURL.toString(),
        imageAlt: title
      }}
      extend={{
        meta: [
          { name: "viewport", content: "width=device-width, initial-scale=1.0" },
          { name: "generator", content: Astro.generator },
          { name: "theme-color", content: "#ffffff" }
        ],
        link: [
          { rel: "icon", type: "image/svg+xml", href: "/favicon.svg" },
          { rel: "icon", href: "/favicon.ico" }
        ]
      }}
    />

    <!-- Preload critical fonts (replace with actual font paths) -->
    <link
      rel="preload"
      href="/fonts/your-primary-font.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <!-- LocalBusiness Schema Markup -->
    <script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />

    <!-- Plausible Analytics - GDPR compliant, no cookie consent needed -->
    <script defer data-domain="via-immobilien.de" src="https://plausible.io/js/script.js"></script>
  </head>
  <body>
    <Header />

    <main class="main" id="main-content">
      <slot />
    </main>

    <Footer />

    <!-- Cookie consent banner - GDPR compliant -->
    <CookieBanner />

    <!-- AOS scroll animation initialization -->
    <script>
      import AOS from 'aos';

      function initAOS() {
        AOS.init({
          duration: 600,
          easing: 'ease-out',
          once: true,
          offset: 50
        });
      }

      // Initialize on page load
      initAOS();

      // Re-init after Astro view transitions (future-proofing)
      document.addEventListener('astro:after-swap', initAOS);
    </script>
  </body>
</html>

<style is:global>
  /* Layout structure for sticky footer */
  body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .main {
    flex: 1;
    padding-top: 4.5rem; /* Account for fixed header height */
  }
</style>
```

**Source:** [astro-seo GitHub examples](https://github.com/jonasmerlin/astro-seo) and best practices from research

### Page-Specific SEO Example

```astro
---
// src/pages/leistungen.astro
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Immobilienvermittlung in Frankfurt - Verkauf & Vermietung | Via Immobilien"
  description="Professionelle Immobilienvermittlung in der Rhein-Main-Region. Von der Bewertung bis zum Vertragsabschluss - wir begleiten Sie bei Verkauf und Vermietung."
  image="/og-leistungen.jpg"
>
  <h1>Unsere Leistungen</h1>
  <!-- Page content -->
</BaseLayout>
```

### Optimized Image Component Usage

```astro
---
import { Image } from 'astro:assets';
import heroImage from '../assets/hero-home.jpg';
import serviceIcon1 from '../assets/service-1.jpg';
---

<!-- Hero image - above the fold, high priority -->
<section class="hero">
  <Image
    src={heroImage}
    alt="Denise Semmel, Ihre Immobilienmaklerin in Frankfurt"
    width={1920}
    height={1080}
    quality={85}
    loading="eager"
    fetchpriority="high"
  />
</section>

<!-- Service images - below the fold, lazy loading -->
<section class="services">
  <Image
    src={serviceIcon1}
    alt="Immobilienbewertung"
    width={400}
    height={300}
    loading="lazy"
  />
</section>
```

**Source:** [Astro Images official docs](https://docs.astro.build/en/guides/images/)

### Astro Config with All Integrations

```javascript
// astro.config.mjs
import { defineConfig } from 'astro/config';
import sitemap from '@astrojs/sitemap';
import robotsTxt from 'astro-robots-txt';

export default defineConfig({
  site: 'https://via-immobilien.de',
  integrations: [
    // Sitemap generation
    sitemap({
      filter: (page) =>
        !page.includes('/admin/') &&
        !page.includes('/preview/') &&
        !page.includes('/danke/'), // Thank you pages don't need indexing
      changefreq: 'weekly',
      priority: 0.7,
      lastmod: new Date()
    }),

    // Robots.txt generation
    robotsTxt({
      sitemap: true,
      host: 'via-immobilien.de',
      policy: [
        {
          userAgent: '*',
          allow: '/',
          disallow: ['/admin/', '/preview/'],
          crawlDelay: 1
        }
      ]
    })
  ],

  // Build optimization
  build: {
    inlineStylesheets: 'auto'
  },

  // Image optimization
  image: {
    service: {
      entrypoint: 'astro/assets/services/sharp'
    }
  }
});
```

**Source:** [@astrojs/sitemap docs](https://docs.astro.build/en/guides/integrations-guide/sitemap/) and [astro-robots-txt npm](https://www.npmjs.com/package/astro-robots-txt)

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| First Input Delay (FID) | Interaction to Next Paint (INP) | March 2024 | INP measures full interaction latency, not just input delay. More comprehensive responsiveness metric. |
| Manual meta tags | Component-based SEO (astro-seo) | Astro 2.0+ era | Type-safe props, automatic Open Graph handling, less duplication |
| Google Fonts CDN | Self-hosted fonts with preload | GDPR enforcement 2022+ | Required for German GDPR compliance, also improves performance |
| Universal Analytics | GA4 or privacy-first alternatives | July 2023 | GA4 requires cookie consent in Germany; Plausible doesn't |
| Image without dimensions | Explicit width/height or native optimization | Core Web Vitals 2020+ | Prevents CLS, critical for Lighthouse 90+ score |
| Multiple small sitemaps | Single auto-generated sitemap | Modern static site generators | Reduces maintenance, automatically stays current |

**Deprecated/outdated:**
- **FID (First Input Delay):** Replaced by INP in Core Web Vitals. Old Lighthouse reports may still show FID, but Google Search uses INP as of March 2024.
- **http-equiv="refresh":** Never use meta refresh for redirects. Use proper 301 redirects or Astro redirects configuration instead.
- **Multiple Open Graph meta tag implementations:** Don't mix manual Open Graph tags with astro-seo component - pick one approach.
- **Hardcoded absolute URLs in meta tags:** Use `Astro.site` and `Astro.url` to generate URLs, don't hardcode domain.

## Open Questions

Things that couldn't be fully resolved:

1. **Plausible Analytics Pricing for Small Business**
   - What we know: Plausible offers cloud-hosted (paid) and self-hosted (free, open source) versions. Cloud pricing starts at €9/month for up to 10k monthly pageviews.
   - What's unclear: Whether the business prefers cloud-hosted (simpler) or self-hosted (free but requires server setup) version.
   - Recommendation: Start with cloud-hosted free trial to validate analytics needs, then decide if self-hosted is worth the technical overhead.

2. **Exact Business Information for LocalBusiness Schema**
   - What we know: Need business name, address, phone, email, coordinates, hours, and service area for complete schema markup.
   - What's unclear: Current schema template in research has placeholder values that need replacement with actual business details.
   - Recommendation: Gather all business details during planning phase, include task to populate schema with real data.

3. **Open Graph Image Specifications**
   - What we know: Recommended size is 1200x630px for best display across all platforms. Should include branding and be relevant to page content.
   - What's unclear: Whether design assets exist for OG images or need to be created for each main page.
   - Recommendation: Create default OG image for site, page-specific images are optional enhancement for v2.

4. **Performance Budget Thresholds**
   - What we know: Success criteria specifies Lighthouse 90+ across all categories and LCP under 2.5s.
   - What's unclear: Whether to implement Lighthouse CI in build process or rely on manual testing.
   - Recommendation: Manual PageSpeed Insights testing initially, add Lighthouse CI only if performance regression becomes a problem.

## Sources

### Primary (HIGH confidence)

- **Google Developers - LocalBusiness Structured Data:** https://developers.google.com/search/docs/appearance/structured-data/local-business - Official Google documentation for LocalBusiness schema requirements and validation
- **Astro Official Docs - Sitemap Integration:** https://docs.astro.build/en/guides/integrations-guide/sitemap/ - Official @astrojs/sitemap documentation v3.7.0
- **Astro Official Docs - Images:** https://docs.astro.build/en/guides/images/ - Official documentation for Astro's built-in image optimization
- **Plausible Analytics - Data Policy:** https://plausible.io/data-policy - Official GDPR compliance and data handling documentation
- **web.dev - Font Best Practices:** https://web.dev/articles/font-best-practices - Google's official font optimization guide
- **GitHub - astro-seo:** https://github.com/jonasmerlin/astro-seo - Official astro-seo component repository with examples

### Secondary (MEDIUM confidence)

- **Complete Guide to Astro Performance Optimization (December 2025):** https://eastondev.com/blog/en/posts/dev/20251202-astro-performance-optimization/ - Comprehensive 8-point optimization guide with real-world results
- **Complete Guide to Astro SEO Optimization (December 2025):** https://eastondev.com/blog/en/posts/dev/20251202-astro-seo-complete-guide/ - Detailed SEO implementation guide for Astro
- **How-to Guide for LocalBusiness Schema Markup:** https://www.schemaapp.com/schema-markup/how-to-do-schema-markup-for-local-business/ - Industry-standard guide for implementing LocalBusiness schema
- **Core Web Vitals 2026 Complete Guide:** https://senorit.de/en/blog/core-web-vitals-2026 - Updated guide covering INP replacement of FID with current thresholds
- **Uploadcare - How to Optimize Images in Astro:** https://uploadcare.com/blog/how-to-optimize-images-in-astro/ - Step-by-step image optimization guide
- **Open Graph Tags Implementation Best Practices:** https://www.linkgraph.com/blog/open-graph-tags/ - Comprehensive Open Graph implementation guide

### Tertiary (LOW confidence - for context only)

- **Medium - Optimizing Astro.js Websites for SEO:** https://medium.com/@aisyndromeart/optimizing-astro-js-websites-for-seo-a-guide-for-developers-25fcd20c8e30 - Developer perspective on Astro SEO
- **Best Privacy-Compliant Analytics Tools for 2026:** https://www.mitzu.io/post/best-privacy-compliant-analytics-tools-for-2026 - Industry overview including Plausible comparison

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH - astro-seo, @astrojs/sitemap, and Plausible Analytics are well-documented with official sources
- Architecture: HIGH - All patterns verified with official Astro docs and Google's structured data guidelines
- Pitfalls: HIGH - Common issues documented across multiple authoritative sources and real-world implementations
- Plausible pricing/hosting: MEDIUM - Documentation is clear, but deployment choice depends on business preferences
- Performance optimization techniques: HIGH - Verified against official Google web.dev guides and Astro documentation

**Research date:** 2026-01-30
**Valid until:** 2026-03-30 (60 days - relatively stable domain, but Core Web Vitals and schema.org specifications can evolve)

**Notes:**
- Core Web Vitals thresholds are stable as of 2026 (LCP < 2.5s, INP < 200ms, CLS < 0.1)
- LocalBusiness schema follows schema.org standards which are backward compatible
- Astro is on stable v5.x release with mature integration ecosystem
- GDPR requirements for German market are well-established and unlikely to change
- Image optimization techniques (WebP, AVIF, responsive images) are standardized
