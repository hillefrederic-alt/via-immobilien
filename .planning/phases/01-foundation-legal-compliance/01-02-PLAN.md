---
phase: 01-foundation-legal-compliance
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/layouts/BaseLayout.astro
  - src/components/Header.astro
  - src/components/Footer.astro
  - src/components/Navigation.astro
  - src/pages/index.astro
autonomous: true

must_haves:
  truths:
    - "Every page displays consistent header with logo and navigation"
    - "Every page displays consistent footer with contact info and legal links"
    - "Header shows Kontakt CTA button that stands out from other nav links"
    - "Hamburger menu appears on mobile screens and opens navigation overlay"
    - "Header hides when scrolling down, reappears when scrolling up (smart sticky)"
    - "Footer displays 3 columns on tablet/desktop, stacks on mobile"
    - "Navigation contains links: Startseite, Uber mich, Leistungen, So arbeite ich, FAQ, Kontakt"
  artifacts:
    - path: "src/layouts/BaseLayout.astro"
      provides: "Page template with header, footer, SEO meta"
      contains: "<Header"
    - path: "src/components/Header.astro"
      provides: "Smart sticky header with navigation"
      contains: "hamburger"
    - path: "src/components/Footer.astro"
      provides: "3-column footer layout"
      contains: "impressum"
    - path: "src/components/Navigation.astro"
      provides: "Reusable navigation links"
      contains: "Kontakt"
  key_links:
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/Header.astro"
      via: "import and render"
      pattern: "import Header from"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/components/Footer.astro"
      via: "import and render"
      pattern: "import Footer from"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/styles/global.css"
      via: "import statement"
      pattern: "import.*global.css"
---

<objective>
Create the base layout template and core navigation components (Header with smart sticky behavior, Footer with 3-column layout) that all pages will use.

Purpose: Establish consistent page structure ensuring header/footer appear on every page. This is required for legal compliance (Impressum/Datenschutz must be accessible from every page) and brand consistency.

Output: BaseLayout.astro template and Header/Footer components with responsive navigation.
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-legal-compliance/01-RESEARCH.md
@.planning/phases/01-foundation-legal-compliance/01-CONTEXT.md
@.planning/phases/01-foundation-legal-compliance/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Header component with smart sticky and hamburger menu</name>
  <files>
    src/components/Header.astro
    src/components/Navigation.astro
  </files>
  <action>
    Create Header.astro with these features (from CONTEXT.md decisions):

    1. Structure:
       - Logo (left) - use placeholder SVG/text until logo file is provided
       - Navigation links (center/right on desktop)
       - CTA "Kontakt" button (prominent, Gold accent color)

    2. Navigation links (from PROJECT.md):
       - Startseite (/)
       - Uber mich (/ueber-mich)
       - Leistungen (/leistungen)
       - So arbeite ich (/so-arbeite-ich)
       - FAQ (/faq)
       - Kontakt (/kontakt) - styled as CTA button

    3. Smart sticky behavior (from CONTEXT.md):
       - Fixed position at top
       - Hides when scrolling down (after 100px scroll)
       - Reappears when scrolling up
       - Use CSS transform for smooth animation
       - Client-side script with scroll listener (see RESEARCH.md Pattern 3)

    4. Mobile hamburger menu (from CONTEXT.md):
       - Show hamburger button on screens < 1024px
       - Use semantic <button> with proper ARIA attributes
       - aria-expanded, aria-controls, aria-label
       - Open overlay/sidebar with nav links
       - Close on Escape key
       - Include visible "Menu" text alongside icon for accessibility
       - See RESEARCH.md Pattern 4 for implementation

    5. Styling:
       - Background: var(--color-cream) or var(--color-navy) - Claude's discretion
       - Use design tokens from global.css
       - Transition for sticky hide/show: transform 0.3s ease

    Create separate Navigation.astro component for reusable nav links array.
  </action>
  <verify>
    1. `npm run dev` and view at localhost:4321
    2. Desktop (>1024px): Navigation links visible inline, hamburger hidden
    3. Mobile (<1024px): Hamburger visible, links hidden until clicked
    4. Scroll down 100+ pixels: header slides up out of view
    5. Scroll up: header slides back into view
    6. Mobile: Click hamburger opens menu, Escape closes it
    7. Tab through navigation with keyboard - all links focusable
  </verify>
  <done>
    Header with smart sticky behavior and accessible hamburger menu
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Footer component with 3-column layout</name>
  <files>
    src/components/Footer.astro
  </files>
  <action>
    Create Footer.astro with 3-column layout (from CONTEXT.md):

    1. Column 1 - Brand:
       - Logo only (no slogan per CONTEXT.md)
       - Placeholder until logo file provided

    2. Column 2 - Contact:
       - Phone: +49 176 33445373 (clickable tel: link)
       - Email: denise@via-immobilien.de (clickable mailto: link)
       - Region: Rhein-Main (text only)
       - Instagram icon/link (placeholder URL for now)

    3. Column 3 - Legal:
       - Heading: "Rechtliches"
       - Links: Impressum (/impressum), Datenschutzerklarung (/datenschutz)
       - Use <nav aria-label="Rechtliche Seiten"> for semantic markup

    4. Responsive layout:
       - Mobile: Stack columns vertically
       - Tablet/Desktop (>640px): 3-column grid

    5. Styling:
       - Background: var(--color-navy) (Claude's discretion allowed, but navy is common for footer contrast)
       - Text: var(--color-cream)
       - Links: var(--color-cream), hover: var(--color-gold)
       - Use design tokens for spacing

    Reference RESEARCH.md Code Examples section for footer pattern.
  </action>
  <verify>
    1. Desktop view: 3 columns side by side
    2. Mobile view (resize browser): columns stack vertically
    3. Phone link: clicking opens phone dialer (mobile) or shows tel: protocol
    4. Email link: clicking opens default email client
    5. Legal links point to /impressum and /datenschutz
    6. Color scheme matches brand (navy background, cream text, gold hover)
  </verify>
  <done>
    Footer with 3-column responsive layout and contact/legal information
  </done>
</task>

<task type="auto">
  <name>Task 3: Create BaseLayout and wire up components</name>
  <files>
    src/layouts/BaseLayout.astro
    src/pages/index.astro
  </files>
  <action>
    Create BaseLayout.astro as the main page template:

    1. HTML structure:
       - <!DOCTYPE html> with lang="de" (German site)
       - <head> with charset, viewport, title, description props
       - Import global.css
       - Favicon placeholder (can be logo or standard icon)

    2. Props interface:
       ```typescript
       interface Props {
         title: string;
         description?: string;
       }
       ```

    3. Body structure:
       - <Header />
       - <main><slot /></main> (page content goes here)
       - <Footer />

    4. Import Header and Footer components

    5. Update src/pages/index.astro:
       - Use BaseLayout as wrapper
       - Set title: "Via Immobilien - Ihre Immobilienmaklerin im Rhein-Main-Gebiet"
       - Set description: "Denise Semmel - Ihre vertrauensvolle Begleitung beim Immobilienverkauf und -vermietung in der Rhein-Main-Region"
       - Add temporary content placeholder: <h1>Via Immobilien</h1><p>Seite im Aufbau</p>

    Reference RESEARCH.md Pattern 2 for BaseLayout structure.
  </action>
  <verify>
    1. `npm run dev` and view localhost:4321
    2. Page shows Header at top, content in middle, Footer at bottom
    3. View page source: lang="de" on html tag
    4. View page source: title tag contains "Via Immobilien"
    5. All navigation works (links may 404, that's expected)
    6. Responsive: resize browser - layout adapts at breakpoints
  </verify>
  <done>
    BaseLayout template working with Header, Footer, and slot for page content
  </done>
</task>

</tasks>

<verification>
1. Homepage renders with header, content area, and footer
2. Header sticks to top and has smart sticky behavior
3. Hamburger menu works on mobile (tap to open, Escape to close)
4. Footer shows contact info and legal links
5. Legal links point to /impressum and /datenschutz (will 404 until pages created)
6. Responsive layout works at all breakpoints (mobile, tablet, desktop)
7. Keyboard navigation works throughout (Tab through all interactive elements)
</verification>

<success_criteria>
- BaseLayout.astro is the single source of page structure
- Header appears on every page using BaseLayout (currently just index)
- Footer appears on every page using BaseLayout
- Impressum and Datenschutz links are accessible in one click from footer
- Mobile hamburger menu is keyboard accessible with proper ARIA
- Smart sticky header hides on scroll down, shows on scroll up
- All components use design tokens from global.css
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-legal-compliance/01-02-SUMMARY.md`
</output>
