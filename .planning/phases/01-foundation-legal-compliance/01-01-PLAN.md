---
phase: 01-foundation-legal-compliance
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - astro.config.mjs
  - tsconfig.json
  - src/styles/global.css
  - public/fonts/
autonomous: true

must_haves:
  truths:
    - "Astro dev server starts without errors on `npm run dev`"
    - "Brand colors Navy #142333, Cream #F5F0EA, Gold #D1B787 are available as CSS variables"
    - "Serif and sans-serif fonts load locally (no external font requests)"
    - "Base font size is 16px with fluid scaling"
  artifacts:
    - path: "package.json"
      provides: "Astro project dependencies"
      contains: '"astro":'
    - path: "astro.config.mjs"
      provides: "Astro configuration"
      contains: "defineConfig"
    - path: "src/styles/global.css"
      provides: "Design tokens and base styles"
      contains: "--color-navy"
    - path: "public/fonts/inter-regular.woff2"
      provides: "Sans-serif font file"
    - path: "public/fonts/libre-baskerville-regular.woff2"
      provides: "Serif font file"
  key_links:
    - from: "src/styles/global.css"
      to: "public/fonts/"
      via: "@font-face declarations"
      pattern: "@font-face.*url\\(.*/fonts/"
---

<objective>
Initialize Astro project and establish design system foundation with brand colors, typography, and spacing tokens.

Purpose: Create the technical foundation that all subsequent components and pages will build upon. This ensures consistent branding and enables parallel development of UI components.

Output: Working Astro project with global CSS design tokens ready for component development.
</objective>

<execution_context>
@/Users/frederichille/.claude/get-shit-done/workflows/execute-plan.md
@/Users/frederichille/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-legal-compliance/01-RESEARCH.md
@.planning/phases/01-foundation-legal-compliance/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Astro project</name>
  <files>
    package.json
    astro.config.mjs
    tsconfig.json
    src/pages/index.astro
  </files>
  <action>
    Create new Astro project in current directory:
    1. Run `npm create astro@latest . -- --template minimal --install --no-git` (project already has git)
    2. Verify astro.config.mjs exists with `defineConfig`
    3. Set site language to German in astro.config.mjs: `site: 'https://via-immobilien.de'`
    4. Create minimal src/pages/index.astro with just `<!DOCTYPE html><html lang="de">` placeholder

    Use Astro 5.x (stable) per research recommendations.
  </action>
  <verify>
    Run `npm run dev` - server should start on localhost:4321
    Run `npm list astro` - version should be 5.x
  </verify>
  <done>
    Astro project initialized with working dev server
  </done>
</task>

<task type="auto">
  <name>Task 2: Download and configure local fonts</name>
  <files>
    public/fonts/inter-regular.woff2
    public/fonts/inter-semibold.woff2
    public/fonts/libre-baskerville-regular.woff2
  </files>
  <action>
    Download fonts for local hosting (GDPR requirement - no Google Fonts CDN):
    1. Create `public/fonts/` directory
    2. Download Inter font (woff2 format) from google-webfonts-helper or fontsource:
       - inter-regular (400)
       - inter-semibold (600)
    3. Download Libre Baskerville (woff2 format):
       - libre-baskerville-regular (400)

    Use curl or wget to download directly from google-webfonts-helper:
    ```bash
    # Inter
    curl -L "https://gwfh.mranftl.com/api/fonts/inter?download=zip&subsets=latin&variants=regular,600" -o inter.zip
    # Libre Baskerville
    curl -L "https://gwfh.mranftl.com/api/fonts/libre-baskerville?download=zip&subsets=latin&variants=regular" -o libre.zip
    ```
    Unzip and move woff2 files to public/fonts/

    Alternative: Use @fontsource packages if download fails:
    `npm install @fontsource/inter @fontsource/libre-baskerville`
    Then copy woff2 files from node_modules to public/fonts/
  </action>
  <verify>
    Files exist: `ls -la public/fonts/*.woff2`
    Should show inter-regular.woff2, inter-600.woff2 (or inter-semibold.woff2), libre-baskerville-regular.woff2
  </verify>
  <done>
    Font files present in public/fonts/ for local serving
  </done>
</task>

<task type="auto">
  <name>Task 3: Create design system CSS with brand tokens</name>
  <files>
    src/styles/global.css
  </files>
  <action>
    Create comprehensive design system in src/styles/global.css:

    1. CSS Reset (minimal, modern approach)
    2. @font-face declarations for Inter and Libre Baskerville (point to /fonts/)
    3. CSS Custom Properties for design tokens:

       Colors (from PROJECT.md):
       - --color-navy: #142333 (primary)
       - --color-cream: #F5F0EA (background)
       - --color-gold: #D1B787 (accent)
       - Semantic aliases: --color-primary, --color-background, --color-accent

       Typography (from CONTEXT.md - mixed fonts):
       - --font-serif: 'Libre Baskerville', Georgia, serif (headings)
       - --font-sans: 'Inter', -apple-system, sans-serif (body)
       - Fluid font sizes using clamp() (16px base, scaling for headings)

       Spacing:
       - --spacing-xs through --spacing-xl using 1rem base unit

    4. Base styles:
       - html { font-size: 100%; } (16px base)
       - body { font-family: var(--font-sans); background: var(--color-cream); color: var(--color-navy); }
       - h1-h6 { font-family: var(--font-serif); }
       - box-sizing: border-box on all elements

    5. Mobile-first foundation:
       - Container max-width: 1200px with auto margins
       - Default padding for mobile

    Reference patterns from 01-RESEARCH.md for fluid typography with clamp().
  </action>
  <verify>
    1. Manually check CSS file contains all required custom properties
    2. Start dev server, open browser DevTools, confirm:
       - Document root has CSS variables defined
       - No network requests to fonts.googleapis.com or fonts.gstatic.com
       - Fonts load from /fonts/ path
  </verify>
  <done>
    Design tokens defined, fonts loading locally, base styles applied
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without errors
2. Browser DevTools Network tab shows NO requests to Google domains
3. Browser DevTools Elements panel shows CSS custom properties on :root
4. Text renders with correct fonts (Inter for body, Libre Baskerville for headings if any)
5. Brand colors visible when applied to test elements
</verification>

<success_criteria>
- Astro 5.x project runs locally on port 4321
- All three brand colors available as CSS variables
- Inter and Libre Baskerville fonts load from local /fonts/ directory
- No GDPR-violating external font requests
- Base typography established at 16px with fluid heading scales
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-legal-compliance/01-01-SUMMARY.md`
</output>
